(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{norX:function(n,t,e){"use strict";e.r(t);var a=e("L2JU"),s=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},l={name:"i18n",data:function(){return{}},computed:s({},Object(a.d)({lang:function(n){return n.lang}})),methods:s({},Object(a.c)({toggleLang:"changeLang"}),{changeLang:function(n){n!=this.lang&&this.toggleLang(n)}})},c=e("KHd+"),o=Object(c.a)(l,function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"sys-page"},[e("app-title",{attrs:{title:"国际化插件"}}),n._v(" "),e("app-notes",[e("p",[n._v("本页实际路径：src/page/i18n/i18n.vue")]),n._v(" "),e("p",[n._v("本系统使用vue-i18n作为语言国际化插件，未进行二次封装。点此查看插件官方文档：\n            "),e("a",{attrs:{target:"_blank",href:"http://kazupon.github.io/vue-i18n/en"}},[n._v(" http://kazupon.github.io/vue-i18n/en")])]),n._v(" "),e("p",[n._v("本系统国际化不完全，仅有点击账户名时“修改密码”及“退出”文字可以切换，部分ElementUI自带组件也会切换。当然你也可以右上角的语言切换按钮进行切换。")])]),n._v(" "),e("div",{staticClass:"page-content"},[n._m(0),n._v(" "),n._m(1)],1)],1)},[function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"sys-article"},[t("p",[this._v("本系统的国际化采用语言包懒加载策略。在系统启动时，根据状态及配置项，页面仅加载对应的语言。当切换语言环境时，对语言包进行懒加载，同时自动判别是否已经加载过该语言包文件。在构建生产环境时会对每种语言进行单独打包。")])])},function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("app-section",{attrs:{title:"使用方法"}},[e("div",{staticClass:"sys-article"},[e("h2",[n._v("创建及配置语言包")]),n._v(" "),e("p",[n._v("在"),e("code",[n._v("src/lang")]),n._v("下，创建语言包对应的语言文件，以key-value格式进行存储。保证在不同文件中key值相同。具体可参考"),e("code",[n._v("src/lang")]),n._v("中的对应代码。以下为示例")]),n._v(" "),e("pre",{pre:!0,attrs:{class:"sys-pre"}},[e("code",[n._v("\n    // en.js                \n    export default {\n        editpassword: 'Edit Password',\n        logout: 'Logout'\n    }\n\n    // zh-cn.js                \n    export default {\n        editpassword: '修改密码',\n        logout: '退出登录'\n    }\n                ")])]),n._v(" "),e("p",[n._v("创建完成后，在"),e("code",[n._v("src/lang/index.js")]),n._v("中配置语言包的对应名称。注意：该名称需要与以后切换语言时的参数相同，并且与语言包名称相同。")])]),n._v(" "),e("div",{staticClass:"sys-article"},[e("h2",[n._v("设置默认语言")]),n._v(" "),e("p",[n._v("在"),e("code",[n._v("src/util/i18n.js")]),n._v("中修改如下代码。需要注意，locale及fallbackLocale的值需要相同，并且与"),e("code",[n._v("src/lang/index.js")]),n._v("中的Key值保证一致。")]),n._v(" "),e("pre",{pre:!0,attrs:{class:"sys-pre"}},[e("code",[n._v("\n    const i18n = new VueI18n({\n        // 当前语言环境\n        locale: 'zhCN', \n        // 默认语言环境。如果locale中无匹配项则采用该项值\n        fallbackLocale: 'zhCN',\n        messages\n    })\n                ")])])]),n._v(" "),e("div",{staticClass:"sys-article"},[e("h2",[n._v("加载默认语言包")]),n._v(" "),e("p",[n._v("在起始页中进行默认语言包加载。示例详情查看："),e("code",[n._v("src/index.vue")])]),n._v(" "),e("pre",{pre:!0,attrs:{class:"sys-pre"}},[e("code",[n._v("\n    export default {\n        // 加载默认语言包\n        created(){\n            let defLang = Cookie.get('lang') || this.$i18n.locale\n            this.$store.dispatch(\"loadLang\", defLang)\n        }\n    }\n                ")])])]),n._v(" "),e("div",{staticClass:"sys-article"},[e("h2",[n._v("语言切换")]),n._v(" "),e("p",[n._v("使用"),e("code",[n._v("loadLang(lang)")]),n._v("方法进行语言切换。该方法被注册在vuex，每次执行时同时更新cookie中的lang值。所以只需引入vuex，再进行调用即可。")]),n._v(" "),e("pre",{pre:!0,attrs:{class:"sys-pre"}},[e("code",[n._v("\n    <el-button :type=\"lang=='zhCN' ? 'primary': 'text'\"  @click=\"changeLang('zhCN')\">中文简体</el-button>\n    <el-button :type=\"lang=='en' ? 'primary': 'text'\"  @click=\"changeLang('en')\">英文</el-button>\n            \n    import {mapState, mapActions} from 'vuex'\n    export default {\n        ...\n        computed: {\n            ...mapState({\n                // 读取当前系统语言\n                lang: state => state.lang\n            })\n        },\n        methods:{\n            ...mapActions({\n                loadLang: 'loadLang'\n            }),\n            // button执行事件\n            changeLang(val){\n                if(val == this.lang) return\n                this.loadLang(val)\n            }\n        }\n    }\n                ")])])])])}],!1,null,null,null);t.default=o.exports}}]);